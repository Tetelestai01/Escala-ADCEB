<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ESCALA ADCEB</title>
<style>
  *{margin:0;padding:0;box-sizing:border-box;}
  body{font-family:"Segoe UI",Arial,sans-serif;background:#f4f6f8;color:#2c3e50;padding-top:60px;}
  header{position:fixed;top:0;left:0;width:100%;background:#2c3e50;color:white;padding:15px;font-size:20px;text-align:center;z-index:1000;box-shadow:0 2px 6px rgba(0,0,0,0.15);}
  main{padding:20px;}
  h1{text-align:center;margin-bottom:20px;}
  .btn{display:inline-block;margin:5px;padding:12px 18px;font-size:16px;border:none;border-radius:10px;background:#3498db;color:white;cursor:pointer;transition:all 0.2s;box-shadow:0 2px 6px rgba(0,0,0,0.15);}
  .btn:hover{background:#2980b9;}
  .btn:active{transform:scale(0.96);}
  .btn-secondary{background:#95a5a6;}
  .btn-danger{background:#e74c3c;}
  .hidden{display:none;}
  #anosContainer,#meses,#diasBotoes{margin:10px 0;display:flex;flex-wrap:wrap;gap:6px;justify-content:center;}
  #diasBotoes{display:grid;grid-template-columns:repeat(7,1fr);}
  #diasBotoes .btn{padding:10px;font-size:13px;}
  .card{background:white;border-radius:12px;padding:20px;margin:20px auto;max-width:400px;box-shadow:0 3px 8px rgba(0,0,0,0.1);}
  .card h2{text-align:center;margin-bottom:15px;}
  .form-group{margin-bottom:12px;}
  .form-group label{display:block;font-size:14px;margin-bottom:4px;color:#34495e;}
  .form-group input{width:100%;padding:8px 10px;border:1px solid #ccd1d9;border-radius:6px;font-size:14px;}
  #resultado{margin-top:15px;padding:10px;border-radius:8px;font-size:14px;text-align:center;}
  #resultado.sucesso{background:#2ecc71;color:white;}
  #resultado.erro{background:#e74c3c;color:white;}
  #loginPage{text-align:center;margin-top:60px;}
  #loginPage h1{margin-bottom:25px;}
</style>
</head>
<body>
<header>ESCALA ADCEB</header>
<main>

<!-- Tela Inicial -->
<div id="loginPage">
  <h1>ESCALA ADCEB</h1>
  <button class="btn" onclick="entrarUsuario()">Entrar como Usu√°rio</button>
  <button class="btn" onclick="entrarADM()">Entrar como ADM</button>
</div>

<!-- Login ADM -->
<div id="loginADM" class="hidden">
  <div class="card">
    <h2>Login ADM</h2>
    <div class="form-group">
      <label>Senha (6 d√≠gitos)</label>
      <input type="password" id="senhaInput" maxlength="6" placeholder="Digite a senha">
    </div>
    <div style="text-align:center;">
      <button class="btn" onclick="verificarLogin()">Entrar</button>
    </div>
    <div id="loginMsg"></div>
  </div>
</div>

<!-- P√°gina Escala -->
<div id="appPrincipal" class="hidden">

  <!-- Sele√ß√£o de ano -->
  <div class="card">
    <h2>Selecionar Ano</h2>
    <div id="anosContainer"></div>
  </div>

  <!-- Sele√ß√£o de m√™s -->
  <div class="card">
    <h2>Escolher M√™s</h2>
    <div id="meses"></div>
  </div>

  <!-- Sele√ß√£o de dia -->
  <div class="card hidden" id="dias">
    <h2>Escolher Dia</h2>
    <div id="diasBotoes"></div>
  </div>

  <!-- Formul√°rio escala -->
  <div class="card hidden" id="formulario">
    <h2 id="dataSelecionada"></h2>
    <form id="escalaForm">
      <div class="form-group"><label>Pregador:</label><input type="text" id="pregador" maxlength="25"></div>
      <div class="form-group"><label>Dire√ß√£o do Culto:</label><input type="text" id="direcao" maxlength="25"></div>
      <div class="form-group"><label>Porta Principal:</label><input type="text" id="portaPrincipal" maxlength="25"></div>
      <div class="form-group"><label>Porta Lateral:</label><input type="text" id="portaLateral" maxlength="25"></div>
      <div class="form-group"><label>Porta Altar:</label><input type="text" id="portaAltar" maxlength="25"></div>
      <div class="form-group"><label>Estacionamento:</label><input type="text" id="estacionamento" maxlength="25"></div>
      <div class="form-group"><label>Bebedouro e Banheiros:</label><input type="text" id="bebedouro" maxlength="25"></div>
      <div class="form-group"><label>Sonoplastia:</label><input type="text" id="sonoplastia" maxlength="25"></div>
    </form>
    <div id="botoesADM" style="text-align:center; margin-top:10px;">
      <button class="btn" onclick="salvarEscala()">üíæ Salvar</button>
      <button class="btn-secondary" onclick="editarEscala()">‚úèÔ∏è Editar</button>
      <button class="btn-danger" onclick="excluirEscala()">üóëÔ∏è Excluir</button>
      <button class="btn-secondary" onclick="alterarSenha()">üîë Alterar Senha</button>
    </div>
    <div id="resultado"></div>
  </div>

</div>

<script>
let senhaADM = localStorage.getItem("senhaADM") || "025563";
let admLogado=false;
let anoSelecionado=new Date().getFullYear();
const anosContainer=document.getElementById("anosContainer");
const mesesDiv=document.getElementById("meses");
const diasDiv=document.getElementById("dias");
const diasBotoes=document.getElementById("diasBotoes");
const formulario=document.getElementById("formulario");
const dataSelecionada=document.getElementById("dataSelecionada");
const resultado=document.getElementById("resultado");
const meses=["Janeiro","Fevereiro","Mar√ßo","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"];

function entrarUsuario(){
  admLogado=false;
  document.getElementById("loginPage").classList.add("hidden");
  document.getElementById("appPrincipal").classList.remove("hidden");
  document.getElementById("botoesADM").style.display="none";
  initApp();
}

function entrarADM(){
  document.getElementById("loginPage").classList.add("hidden");
  document.getElementById("loginADM").classList.remove("hidden");
}

function verificarLogin(){
  const input=document.getElementById("senhaInput").value;
  if(input===senhaADM){
    admLogado=true;
    document.getElementById("loginADM").classList.add("hidden");
    document.getElementById("appPrincipal").classList.remove("hidden");
    document.getElementById("botoesADM").style.display="block";
    initApp();
  }else{
    alert("Senha incorreta!");
  }
}

function alterarSenha(){
  let nova=prompt("Digite nova senha de 6 d√≠gitos:");
  if(nova && nova.length===6 && /^\d{6}$/.test(nova)){
    senhaADM=nova;
    localStorage.setItem("senhaADM",nova);
    alert("Senha alterada com sucesso!");
  }else{ alert("Senha inv√°lida!"); }
}

function initApp(){
  // criar bot√µes de anos
  anosContainer.innerHTML="";
  for(let y=anoSelecionado-2;y<=anoSelecionado+2;y++){
    const btn=document.createElement("button");
    btn.className="btn";
    btn.textContent=y;
    btn.onclick=()=>{ anoSelecionado=y; mostrarMeses(); };
    anosContainer.appendChild(btn);
  }
  mostrarMeses();
}

function mostrarMeses(){
  mesesDiv.innerHTML="";
  meses.forEach((m,i)=>{
    const btn=document.createElement("button");
    btn.className="btn";
    btn.textContent=m;
    btn.onclick=()=>{ mostrarDias(i+1,m); };
    mesesDiv.appendChild(btn);
  });
}

function diasNoMes(m,ano){ return new Date(ano,m,0).getDate(); }
let mesEscolhido=null;
let diaEscolhido=null;

function mostrarDias(mesNumero,mesNome){
  diasDiv.classList.remove("hidden");
  diasBotoes.innerHTML="";
  const qtdDias=diasNoMes(mesNumero,anoSelecionado);
  mesEscolhido=mesNumero;
  for(let d=1;d<=qtdDias;d++){
    const btn=document.createElement("button");
    btn.className="btn";
    btn.textContent=d;
    btn.onclick=()=>{ diaEscolhido=d; mostrarFormulario(mesNome,d); };
    diasBotoes.appendChild(btn);
  }
}

function mostrarFormulario(mesNome,dia){
  formulario.classList.remove("hidden");
  const chave=`${dia}-${mesEscolhido}-${anoSelecionado}`;
  dataSelecionada.textContent=`üìÖ ${dia} de ${mesNome} de ${anoSelecionado}`;
  const escalaSalva=JSON.parse(localStorage.getItem(chave));
  if(escalaSalva){
    document.getElementById("pregador").value=escalaSalva.pregador;
    document.getElementById("direcao").value=escalaSalva.direcao;
    document.getElementById("portaPrincipal").value=escalaSalva.portaPrincipal;
    document.getElementById("portaLateral").value=escalaSalva.portaLateral;
    document.getElementById("portaAltar").value=escalaSalva.portaAltar;
    document.getElementById("estacionamento").value=escalaSalva.estacionamento;
    document.getElementById("bebedouro").value=escalaSalva.bebedouro;
    document.getElementById("sonoplastia").value=escalaSalva.sonoplastia;
  } else { document.getElementById("escalaForm").reset(); }
  [...document.querySelectorAll("#escalaForm input")].forEach(i=>{ i.disabled=!admLogado; });
}

function salvarEscala(){
  if(!admLogado){ feedback("Somente ADM pode salvar.","erro"); return; }
  const chave=`${diaEscolhido}-${mesEscolhido}-${anoSelecionado}`;
  const escala={
    pregador:document.getElementById("pregador").value,
    direcao:document.getElementById("direcao").value,
    portaPrincipal:document.getElementById("portaPrincipal").value,
    portaLateral:document.getElementById("portaLateral").value,
    portaAltar:document.getElementById("portaAltar").value,
    estacionamento:document.getElementById("estacionamento").value,
    bebedouro:document.getElementById("bebedouro").value,
    sonoplastia:document.getElementById("sonoplastia").value
  };
  localStorage.setItem(chave,JSON.stringify(escala));
  feedback("Escala salva com sucesso!","sucesso");
}

function editarEscala(){ if(!admLogado){ feedback("Somente ADM pode editar.","erro"); return; } feedback("Modo edi√ß√£o liberado.","sucesso"); }
function excluirEscala(){ if(!admLogado){ feedback("Somente ADM pode excluir.","erro"); return; } const chave=`${diaEscolhido}-${mesEscolhido}-${anoSelecionado}`; localStorage.removeItem(chave); document.getElementById("escalaForm").reset(); feedback("Escala exclu√≠da.","erro"); }
function feedback(msg,tipo){ resultado.textContent=msg; resultado.className=""; if(tipo) resultado.classList.add(tipo); }
</script>
</body>
</html>
